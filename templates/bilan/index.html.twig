{% extends 'base.html.twig' %}

{% block title %}Bilan{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>
{% set somme = 0 %}
{% set sommetotale = 0 %}
{% set classe = false %}
{% set classeid = false %}

<div class="example-wrapper">
    <h1>Bilan {{ ga_societe }}</h1>

La page du bilan de l'association

<table class="table">
    <tr class="table-primary">

        <td>Code compta</td>
        <td>Montant</td>
    
    </tr>

{% for ecriture in lastcomptes %}
    {% if ecriture.Codecompta is not same as classe %} 
        {% if classe %}
        <tr> <td> <a href="{{path('bilandetail',{'id' : classeid })}} "> {{ classe }}  </a></td> 
        <td> {{ somme }}</td> </tr>
        {% endif %}

    {% set classe = ecriture.Codecompta  %} 
    {% set classeid = ecriture.Codecompta.id %}
    {% set somme = 0 %}
    {% set somme = somme+ ecriture.Montant %}
    
    {% else  %}
    {% set somme = somme+ ecriture.Montant %}
    
    {% endif  %}


    {% set sommetotale = sommetotale+ ecriture.Montant %}

{% endfor %}

        <tr> <td><a  href="{{path('bilandetail',{'id' : classeid })}} "> {{ classe }}  </a></td> 
        <td> {{ somme }}</td> </tr>



</table>
Total Bilan : {{ sommetotale }} Euros

</div>
{% endblock %}
